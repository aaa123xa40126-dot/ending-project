<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ÁµÇÂπïÔºöÔºüÔºüÔºüÔΩú</title>
  <style>
    :root {
      --black: #000;
      --white: #fff;
      --fg: #b8ffd1;
      --bg: #0b0c0d;
      --transition: 5000ms ease;
    }
    html, body { height: 100%; margin: 0; }
    body {
      background: var(--bg);
      color: var(--fg);
      font-family: ui-monospace, monospace;
      display: flex; align-items: center; justify-content: center;
      flex-direction: column;
      transition: background-color var(--transition), color var(--transition);
      position: relative;
    }
    .overlay {
      position: fixed;
      inset: 0;
      background: black;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: clamp(24px, 6vw, 48px);
      cursor: pointer;
      z-index: 9999;
      opacity: 1;
      transition: opacity 1s ease;
    }
    .overlay.fadeout { opacity: 0; pointer-events: none; }

    .fade-screen {
      position: fixed;
      inset: 0;
      opacity: 0;
      z-index: 9998;
      pointer-events: none;
    }
    .fade-screen.black,
    .fade-screen.white { transition: opacity 5s ease; }
    .fade-screen.orange {
      background: #ffefcc;
      transition: opacity 8s ease;
    }
    .fade-screen.black { background: black; }
    .fade-screen.white { background: white; }
    .fade-screen.show { opacity: 1; }

    .page {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.6s ease;
      text-align: center;
      white-space: pre-wrap;
      font-size: 18px;
      width: 90%;
      max-width: 700px;
    }
    .page.active { opacity: 1; visibility: visible; }
    .page.fadeout { opacity: 0; transition: opacity 1.5s ease; } /* üî• Êñ∞Â¢ûÊ∑°Âá∫ */
    .actions {
      margin-top: 30px;
      display: flex;
      justify-content: center;
      gap: 40px;
      opacity: 0;
      transition: opacity 0.6s ease;
    }
    .actions.show { opacity: 1; }
    button {
      border: 0; padding: 12px 24px; font-size: 20px; border-radius: 12px; cursor: pointer;
      background: rgba(255,255,255,.12); color: inherit; font-weight: 700;
    }
    button:hover { background: rgba(255,255,255,.2); }
    .final {
      display: none;
      place-items: center;
      text-align: center;
      height: 100vh;
      opacity: 0;
      font-size: clamp(22px,5vw,48px);
      font-weight: 800;
      transition: opacity 4s ease;
    }
    .final.show { display: grid; opacity: 1; }
    .mode-no { background: var(--white); color: var(--black); transition: background-color 5s ease, color 5s ease; }
    .cursor { display: inline-block; width: .6ch; background: currentColor; animation: blink 1.1s steps(1,end) infinite; }
    @keyframes blink { 50% { opacity: 0; } }

    /* üî• Á¨¨‰∏âÁµêÂ±ÄÁÅ´ÁÑ∞Ê®£Âºè */
    #finalText.fire-ending {
      font-size: clamp(16px, 4vw, 28px);
      background: linear-gradient(180deg, #ffcf6b, #ff8c00, #ff4500);
      -webkit-background-clip: text;
      color: transparent;
      animation: fireGlow 2s ease-in-out infinite;
    }
    @keyframes fireGlow {
      0% { text-shadow: 0 0 4px #ff8c00; }
      50% { text-shadow: 0 0 10px #ffaa33; }
      100% { text-shadow: 0 0 4px #ff8c00; }
    }
  </style>
</head>
<body>
  <div id="overlay" class="overlay">„ÄäÁµÇÂπïÔºöÔºüÔºüÔºü„Äã</div>
  <div id="blackScreen" class="fade-screen black"></div>
  <div id="whiteScreen" class="fade-screen white"></div>
  <div id="orangeScreen" class="fade-screen orange"></div>

  <!-- Èü≥Ê®ÇËàáÈü≥Êïà -->
  <audio id="bgm" preload="auto"><source src="sound.mp3" type="audio/mpeg"></audio>
  <audio id="innocentMusic" preload="auto"><source src="innocent.mp3" type="audio/mpeg"></audio>
  <audio id="gavel" preload="auto"><source src="gavel.mp3" type="audio/mpeg"></audio>
  <audio id="bell" preload="auto"><source src="bell.mp3" type="audio/mpeg"></audio>
  <audio id="glass" preload="auto"><source src="glass.mp3" type="audio/mpeg"></audio>
  <audio id="holy" preload="auto"><source src="holy.mp3" type="audio/mpeg"></audio>
  <audio id="thirdMusic" preload="auto"><source src="third-ending.mp3" type="audio/mpeg"></audio>

  <div id="page1" class="page active"></div>
  <div id="page2" class="page"></div>
  <div id="page3" class="page"></div>
  <div id="page4" class="page"></div>
  <div id="page5" class="page"></div>
  <div id="page6" class="page">
    <div id="page6Text"></div>
    <div class="actions" id="actions">
      <button id="yes">üîòÊòØ</button>
      <button id="no">üîòÂê¶</button>
    </div>
  </div>
  <div id="final" class="final"><div id="finalText"></div></div>

  <script>
    const texts = [
      'ÂíïÂöïÂíïÂöïÂíïÂöïÂöï.................',
      'ÊªãÊªã‚ÄîÊªãÊªãÊªã‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî\n‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶Ë®äËôüÂ∑≤ÈÄ£Êé•ÊàêÂäü„ÄÇ',
      'Ê™îÊ°àËºâÂÖ•‰∏≠‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶‚Ä¶\n1%...........79%.....99%..100%',
      'Êª¥Êª¥Êª¥.............ËºâÂÖ•Â∑≤ÂÆåÊàê„ÄÇ\nÊ™îÊ°àÂ∑≤Êé•Êî∂ÊàêÂäü„ÄÇ',
      'ÊÇ®Á¢∫ÂÆöË¶ÅÊ∞∏‰πÖÂà™Èô§ÈÄôÂÄãÊ™îÊ°àÂóéÔºü\nÊ°£Ê°àÂà†Èô§ÂêéÂ∞ÜÊó†Ê≥ïÂÜçË¢´Âæ©Âéü„ÄÇ',
      'ËØ∑ÈóÆÊÇ®Á°ÆÂÆöË¶ÅÊ∞∏‰πÖÂà†Èô§Ëøô‰∏™Ê°£Ê°àÂêóÔºü\n'
    ];
    const speeds = [40, 40, 40, 40, 150, 150];
    const afterPauses = [1000, 1200, 1200, 1500, 2500, 0];
    const pages = [...document.querySelectorAll('.page')];
    const yesBtn = document.getElementById('yes');
    const noBtn = document.getElementById('no');
    const actions = document.getElementById('actions');
    const bgm = document.getElementById('bgm');
    const innocentMusic = document.getElementById('innocentMusic');
    const gavel = document.getElementById('gavel');
    const bell = document.getElementById('bell');
    const glass = document.getElementById('glass');
    const holy = document.getElementById('holy');
    const thirdMusic = document.getElementById('thirdMusic');
    const blackScreen = document.getElementById('blackScreen');
    const whiteScreen = document.getElementById('whiteScreen');
    const orangeScreen = document.getElementById('orangeScreen');

    let current = 0;
    let typing = false;
    let decisionTimer;

    document.getElementById('overlay').addEventListener('click', () => {
      document.getElementById('overlay').classList.add('fadeout');
      setTimeout(()=>overlay.remove(), 1000);
      bgm.play();
      showPage(current);
    });

    function startDecisionTimer(){
      clearTimeout(decisionTimer);
      decisionTimer = setTimeout(()=>{
        // üî• ÂÖàÊ∑°Âá∫Êï¥ÂÄã page6 ÂÜçËß∏ÁôºÁ¨¨‰∏âÁµêÂ±Ä
        const p6 = document.getElementById('page6');
        p6.classList.add('fadeout');
        actions.classList.remove('show');
        setTimeout(triggerThirdEnding, 1500); // 1.5ÁßíÂæåÈÄ≤ÂÖ•Á¨¨‰∏âÁµêÂ±Ä
      }, 25000);
    }

    function stopDecisionTimer(){
      clearTimeout(decisionTimer);
    }

    function triggerThirdEnding(){
      pages.forEach(p=>p.style.visibility='hidden');
      const final = document.getElementById('final');
      const text = document.getElementById('finalText');
      final.style.display = 'grid';
      final.classList.add('show');
      text.classList.add('fire-ending');
      text.textContent = '';
      thirdMusic.currentTime = 0;
      thirdMusic.play();
      typeTextVerySlow(text,'Ë´ãÂ∏∂ËëóÊÇ®ÁöÑÁÅ´Á®ÆÔºåÂêëÂâçËµ∞Âêß„ÄÇ',600,()=>{
        setTimeout(()=>orangeScreen.classList.add('show'), 4000);
      });
    }

    function typeText(el, text, speed, done){
      el.textContent = '';
      const cursor = document.createElement('span');
      cursor.className = 'cursor';
      el.append(cursor);
      let i = 0;
      typing = true;
      (function step(){
        if (i < text.length){
          cursor.insertAdjacentText('beforebegin', text[i++]);
          let d = speed;
          if ("Ôºå„ÄÇ„ÄÅ‚Ä¶‚Äî.-¬∑:Ôºö;Ôºõ!?ÔºüÔºÅ)Ôºâ]„Äë‚úÖ%".includes(text[i-1])) d += 150;
          setTimeout(step, d);
        } else {
          cursor.remove();
          typing = false;
          done && done();
        }
      })();
    }

    function showPage(idx){
      pages.forEach((p,i)=>p.classList.toggle('active', i===idx));
      const targetEl = (idx === 5) ? document.getElementById('page6Text') : pages[idx];
      if (idx === 5) actions.classList.remove('show');
      typeText(targetEl, texts[idx], speeds[idx], () => {
        if (idx < 5){
          setTimeout(nextPage, afterPauses[idx]);
        } else {
          setTimeout(()=>{
            actions.classList.add('show');
            yesBtn.focus();
            startDecisionTimer();
          }, 1000);
        }
      });
    }

    function nextPage(){
      if (typing) return;
      if (current < pages.length - 1){
        current++;
        requestAnimationFrame(()=>showPage(current));
      }
    }

    function goFinal(mode){
      stopDecisionTimer();
      bgm.pause(); bgm.currentTime = 0;
      pages.forEach(p=>p.style.visibility='hidden');
      const final = document.getElementById('final');
      const text = document.getElementById('finalText');
      text.classList.remove('fire-ending');
      final.style.display = 'grid';
      text.textContent = '';

      if(mode==='yes'){
        gavel.currentTime=0; gavel.play();
        setTimeout(()=>{ bell.currentTime=0; bell.play(); }, 500);
        setTimeout(()=>{
          final.classList.add('show');
          typeTextSlow(text,'Ëá≥Ê≠§',200,()=>{
            innocentMusic.currentTime=0;
            innocentMusic.play(); innocentMusic.loop = false;
            setTimeout(()=>{
              typeTextVerySlow(text,' ÁÑ°ÁΩ™‰∫∫',400,()=>{
                setTimeout(()=>blackScreen.classList.add('show'), 5000);
              });
            }, 2000);
          });
        }, 2000);
      } else {
        glass.currentTime=0; glass.play();
        setTimeout(()=>{ holy.currentTime=0; holy.play(); holy.loop = false; }, 800);
        document.body.classList.add('mode-no');
        setTimeout(()=>{
          final.classList.add('show');
          setTimeout(()=>{
            typeTextVerySlow(text,'Ë∞¢Ë∞¢ÊÇ®ÔºåÊàëÁöÑËßÅËØÅËÄÖ„ÄÇ',500,()=>{
              setTimeout(()=>whiteScreen.classList.add('show'), 5000);
            });
          }, 5000);
        }, 0);
      }
    }

    function typeTextSlow(el, text, speed, done){
      el.textContent = '';
      const cursor = document.createElement('span');
      cursor.className = 'cursor';
      el.append(cursor);
      let i = 0;
      (function step(){
        if (i < text.length){
          cursor.insertAdjacentText('beforebegin', text[i++]);
          let d = speed;
          if ("Ôºå„ÄÇ„ÄÅ‚Ä¶‚Äî.-¬∑:Ôºö;Ôºõ!?ÔºüÔºÅ)Ôºâ]„Äë‚úÖ%".includes(text[i-1])) d += 200;
          setTimeout(step, d);
        } else {
          cursor.remove();
          done && done();
        }
      })();
    }

    function typeTextVerySlow(el, text, speed, done){
      el.textContent = '';
      const cursor = document.createElement('span');
      cursor.className = 'cursor';
      el.append(cursor);
      let i = 0;
      (function step(){
        if (i < text.length){
          cursor.insertAdjacentText('beforebegin', text[i++]);
          let d = speed;
          if ("Ôºå„ÄÇ„ÄÅ‚Ä¶‚Äî.-¬∑:Ôºö;Ôºõ!?ÔºüÔºÅ)Ôºâ]„Äë‚úÖ%".includes(text[i-1])) d += 250;
          setTimeout(step, d);
        } else {
          cursor.remove();
          done && done();
        }
      })();
    }

    yesBtn.onclick = () => goFinal('yes');
    noBtn.onclick  = () => goFinal('no');
  </script>
</body>
</html>
